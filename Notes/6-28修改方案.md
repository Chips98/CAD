ğŸ¯ é’å°‘å¹´æŠ‘éƒç—‡æ¨¡æ‹Ÿç³»ç»Ÿè®¤çŸ¥åŠ¨åŠ›å­¦å¢å¼ºä¿®æ”¹è®¡åˆ’
é˜¶æ®µä¸€ï¼šæ•°æ®æ¨¡å‹å±‚å¢å¼ºï¼ˆä¼˜å…ˆçº§ï¼šé«˜ï¼‰
1.1 LifeEventç±»å¤šç»´åº¦ç‰¹å¾æ‰©å±•
æ–‡ä»¶ä½ç½®ï¼š models/psychology_models.py
å…·ä½“ä¿®æ”¹ï¼š
ä¸ºLifeEventç±»æ·»åŠ ä»¥ä¸‹å±æ€§ï¼š
Apply to 6-28ä¿®æ”¹æ–¹æ¡ˆ.md
æ˜¯å¦ç”±å¿ƒç†çŠ¶æ€è§¦å‘
1.2 äº‹ä»¶å½±å“æƒé‡é…ç½®
æ–‡ä»¶ä½ç½®ï¼š æ–°å»º config/cognitive_dynamics_config.json
ä¿®æ”¹å†…å®¹ï¼š
åˆ›å»ºäº‹ä»¶ç±»å‹ä¸CADçŠ¶æ€çš„æ˜ å°„æƒé‡
å®šä¹‰éçº¿æ€§å½±å“å‡½æ•°çš„å‚æ•°
é…ç½®è®¤çŸ¥åŠ¨åŠ›å­¦åé¦ˆå¾ªç¯çš„ç³»æ•°
é˜¶æ®µäºŒï¼šäº‹ä»¶å¤„ç†é€»è¾‘æ·±åº¦é‡æ„ï¼ˆä¼˜å…ˆçº§ï¼šé«˜ï¼‰
2.1 process_event_impactæ–¹æ³•å¢å¼ºæ–‡ä»¶ä½ç½®ï¼š agents/base_agent.py
å…·ä½“ä¿®æ”¹ï¼š
- é‡æ„ç°æœ‰çš„_process_event_impactæ–¹æ³•ï¼Œå¼•å…¥ä»¥ä¸‹é€»è¾‘ï¼š
Apply to 6-28ä¿®æ”¹æ–¹æ¡ˆ.md
# å¤šç»´åº¦äº‹ä»¶ç‰¹å¾å¤„ç†
impact_multiplier = self._calculate_event_impact_multiplier(event)

# åŸºäºCADçŠ¶æ€çš„ä¸ªä½“å·®å¼‚è°ƒæ•´
individual_susceptibility = self._calculate_individual_susceptibility(event)

# éçº¿æ€§å½±å“è®¡ç®—
final_impact = self._apply_nonlinear_cognitive_dynamics(event, impact_multiplier, individual_susceptibility)
#### 2.2 æ–°å¢è®¤çŸ¥åŠ¨åŠ›å­¦è®¡ç®—æ–¹æ³•æ–‡ä»¶ä½ç½®ï¼š agents/base_agent.pyæ–°å¢æ–¹æ³•ï¼š- _calculate_event_impact_multiplier() - äº‹ä»¶å¤šç»´åº¦å½±å“è®¡ç®—- _calculate_individual_susceptibility() - ä¸ªä½“æ˜“æ„Ÿæ€§è®¡ç®—- _apply_nonlinear_cognitive_dynamics() - éçº¿æ€§è®¤çŸ¥åŠ¨åŠ›å­¦åº”ç”¨- _update_cognitive_feedback_loops() - è®¤çŸ¥åé¦ˆå¾ªç¯æ›´æ–°### é˜¶æ®µä¸‰ï¼šå¯¹è¯ç”Ÿæˆç³»ç»Ÿæ·±åº¦æ•´åˆï¼ˆä¼˜å…ˆçº§ï¼šé«˜ï¼‰#### 3.1 _generate_prompt_for_patientæ–¹æ³•å¢å¼ºæ–‡ä»¶ä½ç½®ï¼š core/therapy_session_manager.pyå…·ä½“ä¿®æ”¹ï¼š- æ·±åº¦æ•´åˆCADçŠ¶æ€åˆ°å¯¹è¯ç”Ÿæˆpromptï¼š
Apply to 6-28ä¿®æ”¹æ–¹æ¡ˆ.md
# åŸºäºæ ¸å¿ƒä¿¡å¿µçš„ä¸ªæ€§åŒ–å›åº”ç­–ç•¥
belief_based_response_pattern = self._generate_belief_based_response_pattern()

# è®¤çŸ¥åŠ å·¥æ–¹å¼çš„è¯­è¨€ç‰¹å¾
cognitive_processing_traits = self._generate_cognitive_processing_traits()

# è¡Œä¸ºå€¾å‘çš„å¯¹è¯è¡¨ç°
behavioral_dialogue_patterns = self._generate_behavioral_dialogue_patterns()
#### 3.2 æ–°å¢CADçŠ¶æ€åˆ°å¯¹è¯æ˜ å°„æ–¹æ³•æ–‡ä»¶ä½ç½®ï¼š core/therapy_session_manager.pyæ–°å¢æ–¹æ³•ï¼š- _generate_belief_based_response_pattern() - åŸºäºæ ¸å¿ƒä¿¡å¿µçš„å›åº”æ¨¡å¼- _generate_cognitive_processing_traits() - è®¤çŸ¥åŠ å·¥ç‰¹å¾ç”Ÿæˆ- _generate_behavioral_dialogue_patterns() - è¡Œä¸ºæ¨¡å¼å¯¹è¯è¡¨ç°- _calculate_dialogue_resistance_level() - å¯¹è¯é˜»æŠ—æ°´å¹³è®¡ç®—### é˜¶æ®µå››ï¼šæ²»ç–—æ•ˆæœè¯„ä¼°ç³»ç»Ÿé‡æ„ï¼ˆä¼˜å…ˆçº§ï¼šä¸­ï¼‰#### 4.1 _evaluate_conversation_effectivenessæ–¹æ³•é‡æ„æ–‡ä»¶ä½ç½®ï¼š core/therapy_session_manager.pyå…·ä½“ä¿®æ”¹ï¼š- åŸºäºCAD-MDå…³é”®æŒ‡æ ‡çš„æ²»ç–—æ•ˆæœè¯„ä¼°ï¼š
Apply to 6-28ä¿®æ”¹æ–¹æ¡ˆ.md
# CADçŠ¶æ€å˜åŒ–è¯„ä¼°
cad_improvement = self._evaluate_cad_state_changes()

# è®¤çŸ¥åŠ¨åŠ›å­¦æŒ‡æ ‡è¯„ä¼°
cognitive_dynamics_score = self._calculate_cognitive_dynamics_score()

# ç»¼åˆæ²»ç–—æ•ˆæœè®¡ç®—
comprehensive_effectiveness = self._calculate_comprehensive_treatment_effect()
#### 4.2 æ–°å¢CAD-MDåŸºç¡€è¯„ä¼°æ–¹æ³•æ–‡ä»¶ä½ç½®ï¼š core/therapy_session_manager.pyæ–°å¢æ–¹æ³•ï¼š- _evaluate_cad_state_changes() - CADçŠ¶æ€å˜åŒ–è¯„ä¼°- _calculate_cognitive_dynamics_score() - è®¤çŸ¥åŠ¨åŠ›å­¦è¯„åˆ†- _update_recovery_rules_based_on_cad() - åŸºäºCADçš„æ¢å¤è§„åˆ™æ›´æ–°### é˜¶æ®µäº”ï¼šäº‹ä»¶ç”Ÿæˆå™¨è®¤çŸ¥åŠ¨åŠ›å­¦æ•´åˆï¼ˆä¼˜å…ˆçº§ï¼šä¸­ï¼‰#### 5.1 _calculate_impact_scoreæ–¹æ³•å¢å¼ºæ–‡ä»¶ä½ç½®ï¼š core/event_generator.pyå…·ä½“ä¿®æ”¹ï¼š- æ•´åˆCADçŠ¶æ€åˆ°äº‹ä»¶å½±å“è®¡ç®—ï¼š
Apply to 6-28ä¿®æ”¹æ–¹æ¡ˆ.md
# åŸºäºCADçŠ¶æ€çš„äº‹ä»¶æ˜“æ„Ÿæ€§
cad_susceptibility = self._calculate_cad_based_susceptibility(protagonist_state)

# è®¤çŸ¥åå·®å¯¹äº‹ä»¶æ„ŸçŸ¥çš„å½±å“
cognitive_bias_factor = self._calculate_cognitive_bias_factor(protagonist_state)

# ç»¼åˆå½±å“åˆ†æ•°è®¡ç®—
final_impact = base_score * cad_susceptibility * cognitive_bias_factor
### é˜¶æ®µå…­ï¼šé…ç½®æ–‡ä»¶ç³»ç»Ÿå®Œå–„ï¼ˆä¼˜å…ˆçº§ï¼šä½ï¼‰#### 6.1 è®¤çŸ¥åŠ¨åŠ›å­¦é…ç½®æ–‡ä»¶æ–‡ä»¶ä½ç½®ï¼š config/cognitive_dynamics_config.jsoné…ç½®å†…å®¹ï¼š- äº‹ä»¶ç±»å‹æƒé‡çŸ©é˜µ- éçº¿æ€§å‡½æ•°å‚æ•°- è®¤çŸ¥åé¦ˆå¾ªç¯ç³»æ•°- CADçŠ¶æ€é˜ˆå€¼è®¾ç½®#### 6.2 æ²»ç–—æ•ˆæœé…ç½®æ›´æ–°æ–‡ä»¶ä½ç½®ï¼š ç°æœ‰é…ç½®æ–‡ä»¶æ›´æ–°ä¿®æ”¹å†…å®¹ï¼š- æ·»åŠ CAD-MDè¯„ä¼°æƒé‡- é…ç½®è®¤çŸ¥åŠ¨åŠ›å­¦æ²»ç–—å‚æ•°- è®¾ç½®æ¢å¤è§„åˆ™é˜ˆå€¼### é˜¶æ®µä¸ƒï¼šæµ‹è¯•éªŒè¯ç³»ç»Ÿï¼ˆä¼˜å…ˆçº§ï¼šä½ï¼‰#### 7.1 å•å…ƒæµ‹è¯•æ–‡ä»¶ä½ç½®ï¼š æ–°å»º tests/test_cognitive_dynamics.pyæµ‹è¯•å†…å®¹ï¼š- äº‹ä»¶å½±å“è®¡ç®—å‡†ç¡®æ€§- CADçŠ¶æ€æ›´æ–°é€»è¾‘- è®¤çŸ¥åŠ¨åŠ›å­¦åé¦ˆå¾ªç¯#### 7.2 é›†æˆæµ‹è¯•æ–‡ä»¶ä½ç½®ï¼š æ–°å»º tests/test_therapy_cognitive_integration.pyæµ‹è¯•å†…å®¹ï¼š- å¯¹è¯ç”ŸæˆCADæ•´åˆæ•ˆæœ- æ²»ç–—æ•ˆæœè¯„ä¼°å‡†ç¡®æ€§- æ•´ä½“ç³»ç»Ÿè®¤çŸ¥ä¸€è‡´æ€§---## ğŸš€ å®æ–½å»ºè®®### ç¬¬ä¸€å‘¨ï¼šæ ¸å¿ƒåŸºç¡€å»ºè®¾1. å®ŒæˆLifeEventç±»æ‰©å±•2. é‡æ„_process_event_impactæ–¹æ³•3. æ–°å¢è®¤çŸ¥åŠ¨åŠ›å­¦è®¡ç®—æ–¹æ³•### ç¬¬äºŒå‘¨ï¼šå¯¹è¯ç³»ç»Ÿå¢å¼º1. æ·±åº¦æ•´åˆCADçŠ¶æ€åˆ°å¯¹è¯ç”Ÿæˆ2. å®ç°ä¸ªæ€§åŒ–å›åº”ç­–ç•¥3. å®Œå–„è®¤çŸ¥ç‰¹å¾æ˜ å°„### ç¬¬ä¸‰å‘¨ï¼šè¯„ä¼°ç³»ç»Ÿä¼˜åŒ–1. é‡æ„æ²»ç–—æ•ˆæœè¯„ä¼°2. å®ç°CAD-MDåŸºç¡€è¯„ä¼°3. æ›´æ–°æ¢å¤è§„åˆ™### ç¬¬å››å‘¨ï¼šç³»ç»Ÿæ•´åˆä¸æµ‹è¯•1. å®Œæˆé…ç½®æ–‡ä»¶ç³»ç»Ÿ2. å®æ–½ç»¼åˆæµ‹è¯•3. æ€§èƒ½ä¼˜åŒ–å’Œè°ƒè¯•è¿™ä¸ªä¿®æ”¹è®¡åˆ’å°†æ˜¾è‘—æå‡ç³»ç»Ÿçš„è®¤çŸ¥åŠ¨åŠ›å­¦çœŸå®æ€§ï¼Œä½¿äº‹ä»¶å½±å“å’Œå¯¹è¯ç”Ÿæˆéƒ½åŸºäºæ·±å±‚çš„å¿ƒç†å­¦ç†è®ºï¼Œè€Œä¸æ˜¯ç®€å•çš„çº¿æ€§è®¡ç®—ã€‚æ‚¨å¸Œæœ›æˆ‘ä»å“ªä¸ªé˜¶æ®µå¼€å§‹å…·ä½“å®æ–½ï¼Ÿ